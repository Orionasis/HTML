<!DOCTYPE html>
<html>
    <head><title>GK</title>
        <meta charset="utf-8"/>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <script language="javascript" type="text/javascript">
        function load_message(){
            xhr=null;
            xhr=new XMLHttpRequest();
            xhr.onreadystatechange=function(){
                if((4==xhr.readyState) && 200==xhr.status){
                    document.getElementById("messages").innerHTML=xhr.responseText;
                }
                if((4==xhr.readyState) && 404==xhr.status){
                    alert("fichier introuvable");
                }
            }
            xhr.open("Get","data.php",true);
            xhr.send(null);
        }
        function insert_data(){
            var nom=document.getElementById("nom").value;
            var email=document.getElementById("email").value;
            var contenu=document.getElementById("contenu").value;

            xhr=null;
            xhr=new XMLHttpRequest();
            xhr.onreadystatechange=function(){
                if((4==xhr.readyState) && 200==xhr.status){
                    document.getElementById("messages").innerHTML=xhr.responseText;
                }
                if((4==xhr.readyState) && 404==xhr.status){
                    alert("fichier introuvable");
                }
            }
            xhr.open("GET","insertion.php?nom="+nom+"&email="+email+"&contenu="+contenu,true);
            xhr.send(null);
        }
        function delete_data(val){
            xhr=null;
            xhr=new XMLHttpRequest();
            xhr.onreadystatechange=function(){
                if((4==xhr.readyState) && 200==xhr.status){
                    document.getElementById("messages").innerHTML=xhr.responseText;
                }
                if((4==xhr.readyState) && 404==xhr.status){
                    alert("fichier introuvable");
                }
            }
            xhr.open("GET","delete.php?id="+val,true);
            xhr.send(null);
            
            }
    </script>
    </head>
    <body>
       
        <div class="contaner">
            <h1 align="center">Ajax</h1>
            <h3 align="center">formulaire d'ajout d'un nouveau message</h3>
            <div style="margin: 20px">
  
                <div class="form-group">
                    <label for="nom">Nom</label>
                    <input type="text" class="form-control" id="nom" placeholder="Enter name">
                </div>
                    <div class="form-group">
                      <label for="email">Email address</label>
                      <input type="email" class="form-control" id="email" placeholder="Enter email">
                    </div>
                    <div class="form-group">
                      <label for="contenu">Contenu</label>
                      <textarea class="form-control" id="contenu" placeholder="Entrer votre message"></textarea>
                    </div>
                    <button onclick="insert_data()" class="btn btn-primary">Submit</button>
        <button align="center" onclick="load_message()" class="btn btn-success">Charger data</button>
        
        </div>
        </div>
        <div id="messages" align="center">Click to load data</div>
       
    </body>
</html>